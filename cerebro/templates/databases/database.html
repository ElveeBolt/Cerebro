{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock title %}

{% block content %}
<div class="container">
    <div class="header-title">
        <h1>{{ title }}</h1>
        <div class="subtitle">{{ subtitle }}</div>
    </div>
    <div class="row">
        <div class="col-7">
            {% if not index_info %}
            <div class="card">
                <div class="row">
                    <div class="col-2">
                        <span class="svg-icon infograph">
                            <svg width="100%" height="auto" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path opacity="0.3" d="M20.0381 4V10C20.0381 10.6 19.6381 11 19.0381 11H17.0381C16.4381 11 16.0381 10.6 16.0381 10V4C16.0381 2.9 16.9381 2 18.0381 2C19.1381 2 20.0381 2.9 20.0381 4ZM9.73808 18.9C10.7381 18.5 11.2381 17.3 10.8381 16.3L5.83808 3.29999C5.43808 2.29999 4.23808 1.80001 3.23808 2.20001C2.23808 2.60001 1.73809 3.79999 2.13809 4.79999L7.13809 17.8C7.43809 18.6 8.23808 19.1 9.03808 19.1C9.23808 19 9.53808 19 9.73808 18.9ZM19.0381 18H17.0381V20H19.0381V18Z" fill="currentColor"/>
                                <path d="M18.0381 6H4.03809C2.93809 6 2.03809 5.1 2.03809 4C2.03809 2.9 2.93809 2 4.03809 2H18.0381C19.1381 2 20.0381 2.9 20.0381 4C20.0381 5.1 19.1381 6 18.0381 6ZM4.03809 3C3.43809 3 3.03809 3.4 3.03809 4C3.03809 4.6 3.43809 5 4.03809 5C4.63809 5 5.03809 4.6 5.03809 4C5.03809 3.4 4.63809 3 4.03809 3ZM18.0381 3C17.4381 3 17.0381 3.4 17.0381 4C17.0381 4.6 17.4381 5 18.0381 5C18.6381 5 19.0381 4.6 19.0381 4C19.0381 3.4 18.6381 3 18.0381 3ZM12.0381 17V22H6.03809V17C6.03809 15.3 7.33809 14 9.03809 14C10.7381 14 12.0381 15.3 12.0381 17ZM9.03809 15.5C8.23809 15.5 7.53809 16.2 7.53809 17C7.53809 17.8 8.23809 18.5 9.03809 18.5C9.83809 18.5 10.5381 17.8 10.5381 17C10.5381 16.2 9.83809 15.5 9.03809 15.5ZM15.0381 15H17.0381V13H16.0381V8L14.0381 10V14C14.0381 14.6 14.4381 15 15.0381 15ZM19.0381 15H21.0381C21.6381 15 22.0381 14.6 22.0381 14V10L20.0381 8V13H19.0381V15ZM21.0381 20H15.0381V22H21.0381V20Z" fill="currentColor"/>
                            </svg>
                        </span>
                    </div>
                    <div class="col-10">
                        <p>К сожалению данный источник данных поврежден либо отсутствует.
                            Мы уже устраняем неисправность. Для получения справки перейдите на страницу помощи.</p>
                        <a href="{% url 'help' %}" class="btn">Смотреть помощь</a>
                    </div>
                </div>
            </div>
            {% endif %}
            <div class="card">
                <div class="card-heading mb-3">
                    <h2>{{ database.title }}</h2>
                    <div class="subtitle">Ниже приведена информация касательно базы данных</div>
                </div>
                {{ database.about|linebreaks }}
                {% if database.comment %}
                <div class="comment-block">
                    {{ database.comment|linebreaks }}
                </div>
                {% endif %}
            </div>
            {% if database.posts.all %}
            <div class="card">
                <div class="card-heading mb-3">
                    <h2>Посты</h2>
                    <div class="subtitle">Список постов связанных с источником данных</div>
                </div>
                <div class="post-links">
                {% for post in database.posts.all %}
                    <div class="post-link">
                        <span class="svg-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path opacity="0.3" d="M19 22H5C4.4 22 4 21.6 4 21V3C4 2.4 4.4 2 5 2H14L20 8V21C20 21.6 19.6 22 19 22Z" fill="currentColor"/>
                                <path d="M15 8H20L14 2V7C14 7.6 14.4 8 15 8Z" fill="currentColor"/>
                            </svg>
                        </span>
                        <div class="title">{{ post.title }}</div>
                        <a href="{% url 'post' pk=post.id  %}" class="btn">Читать пост</a>
                    </div>
                {% endfor %}
                </div>
            </div>
            {% endif %}
            <div class="card">
                <div class="card-heading mb-3">
                    <h2>Дополнительно</h2>
                    <div class="subtitle">Дополнительная информация об источнике</div>
                </div>
                <ul class="user-info-list list-unstyled mb-0">
                    <li>
                        <span class="left">Актуальность данных:</span>
                        <span class="right">
                            {% if database.actuality %}{{ database.actuality }}{% else %}Не установлена{% endif %}
                        </span>
                    </li>
                    <li>
                        <span class="left">Количество записей:</span>
                        <span class="right">{% if index_info.documents %}{{ index_info.documents }}{% else %}Данные отсутствуют{% endif %}</span>
                    </li>
                    <li>
                        <span class="left">Объём источника:</span>
                        <span class="right">{% if index_info.size %}{{ index_info.size }}{% else %}Данные отсутствуют{% endif %}</span>
                    </li>
                    <li>
                        <span class="left">Источник данных (индекс):</span>
                        <span class="right">{% if index_info.index %}{{ index_info.index }}{% else %}Данные отсутствуют{% endif %}</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock content %}