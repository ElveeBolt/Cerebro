{% extends 'base.html' %}
{% load custom_tags %}

{% block title %}{{ title }}{% endblock title %}

{% block content %}
{% if documents != None %}
<div class="nav-results">
    <div class="container">
        Примерное количество результатов: {{ documents.total }}
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-7">
            {% if documents_results %}
            <div class="card">
                <div class="row">
                    <div class="col-2">
                        <span class="svg-icon infograph">
                            <svg width="100%" height="auto" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21.7 18.9L18.6 15.8C17.9 16.9 16.9 17.9 15.8 18.6L18.9 21.7C19.3 22.1 19.9 22.1 20.3 21.7L21.7 20.3C22.1 19.9 22.1 19.3 21.7 18.9Z" fill="currentColor"/>
                                <path opacity="0.3" d="M11 20C6 20 2 16 2 11C2 6 6 2 11 2C16 2 20 6 20 11C20 16 16 20 11 20ZM11 4C7.1 4 4 7.1 4 11C4 14.9 7.1 18 11 18C14.9 18 18 14.9 18 11C18 7.1 14.9 4 11 4ZM8 11C8 9.3 9.3 8 11 8C11.6 8 12 7.6 12 7C12 6.4 11.6 6 11 6C8.2 6 6 8.2 6 11C6 11.6 6.4 12 7 12C7.6 12 8 11.6 8 11Z" fill="currentColor"/>
                            </svg>
                        </span>
                    </div>
                    <div class="col-10">
                        <p>К сожалению в Cerebro слишком много результатов по вашему запросу.
                            Рекомендуем уточнить свой поиск либо воспользоваться помощью.</p>
                        <a href="{% url 'help' %}" class="btn">Смотреть помощь</a>
                    </div>
                </div>
            </div>
            {% endif %}
            <div class="card">
                {% for item in page_obj %}
                <div class="card-search">
                    <div class="subinfo">
                        {{ item.source.category | get_category_icon | safe }}
                        <div class="title">{{ item.source.category | get_category_name }}</div>
                        Источник: {{ item.source.database }}
                    </div>
                    <h3><a href="{% url 'result' index=item.index id=item.id %}">
                        {% if item.highlight %}
                        {{ item.highlight | safe }}
                        {% else %}
                        {{ item.source.name }}
                        {% endif %}
                    </a></h3>
                    <div class="text">
                        {% if item.source.country %}
                        Страна: {{ item.source.country }},
                        {% endif %}
                        {% if item.source.phones %}
                        Телефон:
                        {% for phone in item.source.phones %}{{ phone }}&nbsp;{% endfor %},
                        {% endif %}
                        {% if item.source.emails %}
                        E-mail:
                        {% for email in item.source.emails %}{{ email }}{% endfor %},
                        {% endif %}
                        {% if item.source.sex %}
                        Пол:
                        {% if item.source.sex == 0 %}Женский{% else %}Мужской{% endif %},
                        {% endif %}
                        {% if item.source.birth_date %}
                        Дата рождения: {{ item.source.birth_date }},
                        {% endif %}
                        {% if item.source.date %}
                        Дата обновления: {{ item.source.date }}
                        {% endif %}
                    </div>
                    <div class="tags">
                        {% if item.source.documents %}
                        <span class="tag">
                            <span class="svg-icon">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path opacity="0.3"
                                          d="M19 22H5C4.4 22 4 21.6 4 21V3C4 2.4 4.4 2 5 2H14L20 8V21C20 21.6 19.6 22 19 22Z"
                                          fill="currentColor"></path>
                                    <path d="M15 8H20L14 2V7C14 7.6 14.4 8 15 8Z" fill="currentColor"></path>
                                </svg>
                            </span>
                            Наличие документов
                        </span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            <nav>
                <ul class="pagination">
                    {% if page_obj.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?q={{ query }}&start={{ page_obj.previous_page_number }}">
                            <span class="svg-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11.2657 11.4343L15.45 7.25C15.8642 6.83579 15.8642 6.16421 15.45 5.75C15.0358 5.33579 14.3642 5.33579 13.95 5.75L8.40712 11.2929C8.01659 11.6834 8.01659 12.3166 8.40712 12.7071L13.95 18.25C14.3642 18.6642 15.0358 18.6642 15.45 18.25C15.8642 17.8358 15.8642 17.1642 15.45 16.75L11.2657 12.5657C10.9533 12.2533 10.9533 11.7467 11.2657 11.4343Z" fill="currentColor"/>
                                </svg>
                            </span>
                        </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <a class="page-link" href="#">
                            <span class="svg-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11.2657 11.4343L15.45 7.25C15.8642 6.83579 15.8642 6.16421 15.45 5.75C15.0358 5.33579 14.3642 5.33579 13.95 5.75L8.40712 11.2929C8.01659 11.6834 8.01659 12.3166 8.40712 12.7071L13.95 18.25C14.3642 18.6642 15.0358 18.6642 15.45 18.25C15.8642 17.8358 15.8642 17.1642 15.45 16.75L11.2657 12.5657C10.9533 12.2533 10.9533 11.7467 11.2657 11.4343Z" fill="currentColor"/>
                                </svg>
                            </span>
                        </a>
                    </li>
                    {% endif %}
                    {% for i in page_obj.paginator.page_range %}
                    {% if page_obj.number == i %}
                    <li class="page-item active" aria-current="page"><a class="page-link" href="#">{{ i }}</a></li>
                    {% else %}
                    <li class="page-item"><a class="page-link" href="?q={{ query }}&start={{ i }}">{{ i }}</a></li>
                    {% endif %}
                    {% endfor %}
                    {% if page_obj.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?q={{ query }}&start={{ page_obj.next_page_number }}">
                            <span class="svg-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z" fill="currentColor"/>
                                </svg>
                            </span>
                        </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <a class="page-link" href="#">
                            <span class="svg-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12.6343 12.5657L8.45001 16.75C8.0358 17.1642 8.0358 17.8358 8.45001 18.25C8.86423 18.6642 9.5358 18.6642 9.95001 18.25L15.4929 12.7071C15.8834 12.3166 15.8834 11.6834 15.4929 11.2929L9.95001 5.75C9.5358 5.33579 8.86423 5.33579 8.45001 5.75C8.0358 6.16421 8.0358 6.83579 8.45001 7.25L12.6343 11.4343C12.9467 11.7467 12.9467 12.2533 12.6343 12.5657Z" fill="currentColor"/>
                                </svg>
                            </span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </div>
</div>
{% else %}
<div class="container">
    <div class="row">
        <div class="col-7">
            <div class="card card-message">
                <span class="svg-icon infograph">
                    <svg width="100%" height="auto" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.7 18.9L18.6 15.8C17.9 16.9 16.9 17.9 15.8 18.6L18.9 21.7C19.3 22.1 19.9 22.1 20.3 21.7L21.7 20.3C22.1 19.9 22.1 19.3 21.7 18.9Z" fill="currentColor"/>
                        <path opacity="0.3" d="M11 20C6 20 2 16 2 11C2 6 6 2 11 2C16 2 20 6 20 11C20 16 16 20 11 20ZM11 4C7.1 4 4 7.1 4 11C4 14.9 7.1 18 11 18C14.9 18 18 14.9 18 11C18 7.1 14.9 4 11 4ZM8 11C8 9.3 9.3 8 11 8C11.6 8 12 7.6 12 7C12 6.4 11.6 6 11 6C8.2 6 6 8.2 6 11C6 11.6 6.4 12 7 12C7.6 12 8 11.6 8 11Z" fill="currentColor"/>
                    </svg>
                </span>
                <h2>Поиск не дал результатов</h2>
                <div class="text">
                    <p>По вашему запросу - <b>{{ query }}</b>, не найдено ни одного документа. Ознакомтесь с рекомендациями,
                        которые приведены ниже:</p>
                    <ul class="mb-0">
                        <li>Убедитесь, что все слова написаны верно.</li>
                        <li>Попробуйте разные ключевые слова.</li>
                        <li>Попробуйте использовать более общие ключевые слова.</li>
                        <li>Попробуйте использовать меньше ключевых слов.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock content %}